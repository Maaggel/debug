/*
 * Inspire Me Debug.js
 *
 * Copyright 2016 Inspire Me. (http://inspireme.dk)
 * Dual licensed under the MIT or GPL licenses.
 * http://inspireme.dk/open-source-licenses
 *
 * http://inspireme.dk
 *
 */
function watch(e,n,t){return"undefined"==typeof n&&(n=""),"undefined"==typeof e?!1:("undefined"==typeof t&&(t=!1),$debug.init(),void $debug.addListener(e,n,t))}function unWatch(e){"undefined"!=typeof e&&($debug.init(),$debug.unWatch(e))}var $debug={interval:!1,listeners:[],debugWindow:!1,prefix:"js_debug",settings:{interval:100},addListener:function(e,n,t){$debug.listeners.push({namespace:!1,object:e,savedValue:!1,name:n,modify:t,collapsed:!1})},digest:function(){$debug.listeners.forEach(function(e){if(debugWindow){if(!e.namespace){var n=document.createElement("div");n.setAttribute("class","namespace");var t=e.name.replace(/\W+/g,"");parseInt($debug.getCookie(t+"_collapsed"))&&(n.className+=" collapsed"),n.setAttribute("data-debugid",t),debugWindow.appendChild(n),e.namespace=n}var a=JSON.stringify(e.object,function(e,n){return"function"==typeof n?""+n:n}),o=$debug.md5(a);e.savedValue!=o&&($debug.setNamespace(e),e.savedValue=o)}})},unWatch:function(e){Object.keys($debug.listeners).forEach(function(n){var t=$debug.listeners[n];e==t.object&&(delete $debug.listeners[n],t.namespace.parentNode.removeChild(t.namespace))})},setNamespace:function(e){e.namespace.innerHTML='<span class="name">'+(""==e.name?"("+(Array.isArray(e.object)?"array":typeof e.object)+")":e.name)+(e.modify?'<span class="nameLabel">(editable)</span>':"")+'<div class="collapse" onclick="$debug.collapse(this);"></div></span>';var n='<div class="content">';switch(Array.isArray(e.object)?"array":typeof e.object){case"function":n+="Cannot track functions";break;case"object":case"array":n+=$debug.getObjectChildren(e.object,e.modify);break;default:n+="Can only track objects and arrays directly"}e.namespace.innerHTML+=n+"</div>"},collapse:function(e){var n=e.parentElement.parentElement;n.classList.toggle("collapsed");var t=n.dataset.debugid;""!=n.dataset.debugid&&$debug.setCookie(t+"_collapsed",n.classList.contains("collapsed")?1:0)},getObjectChildren:function(e,n,t){"undefined"==typeof t&&(t=0);var a='<ul class="level-'+t+'">';return Object.keys(e).forEach(function(o){var d=e[o];a+="function"==typeof d?'<li class="type-function">function</li>':Array.isArray(d)?'<li class="type-array">'+o+': <span class="value">(array)</span>'+$debug.getObjectChildren(d,n,t+1)+"</li>":"object"==typeof d?'<li class="type-object">'+o+': <span class="value">(object)</span>'+$debug.getObjectChildren(d,n,t+1)+"</li>":"number"==typeof d?'<li class="type-number">'+o+': <span class="value">'+(n?'<input type="text" value="'+d+'" />':d)+"</span></li>":"string"==typeof d?'<li class="type-string">'+o+': <span class="value">'+(n?'<input type="text" value="'+d+'" />':d)+"</span></li>":"boolean"==typeof d?'<li class="type-bool">'+o+': <span class="value">'+(d?"true":"false")+"</span></li>":'<li class="type-unknown">'+o+': <span class="value">unknown type ('+typeof d+")</span></li>"}),a+="</ul>"},init:function(){if(debugWindow=document.querySelector(".debugWindow"),!debugWindow){debugWindow=document.createElement("div"),debugWindow.setAttribute("class","debugWindow"),document.body.appendChild(debugWindow);var e=document.createElement("style");e.setAttribute("type","text/css"),$debug.addStyling(e,".debugWindow","position: fixed; top: 0px; right: 0px; z-index: 10000;"),$debug.addStyling(e,".debugWindow .namespace","position: relative; background-color: #222; color: #FFF; font-size: 11px; font-family: Courier; box-sizing: border-box; min-width: 215px; max-width: 280px; margin: 5px; border-radius: 4px; -webkit-box-shadow: 0px 1px 1px 0px rgba(0,0,0,0.3); -moz-box-shadow: 0px 1px 1px 0px rgba(0,0,0,0.3); box-shadow: 0px 1px 1px 0px rgba(0,0,0,0.3);"),$debug.addStyling(e,".debugWindow .namespace .name","display: block; padding: 5px 21px 5px 5px; border-bottom: 1px solid #444; background-color: #000; border-radius: 5px 5px 0 0;"),$debug.addStyling(e,".debugWindow .namespace .name .nameLabel","color: #ACACAC;"),$debug.addStyling(e,".debugWindow .namespace .name .collapse","cursor: pointer; right: 7px; top: 9.5px; opacity: .4; position: absolute; width: 0; height: 0; border-style: solid; border-width: 7px 5px 0 5px; border-color: #ffffff transparent transparent transparent;"),$debug.addStyling(e,".debugWindow .namespace.collapsed .name","border-radius: 5px; border-bottom: 0;"),$debug.addStyling(e,".debugWindow .namespace.collapsed .name .collapse","top: 9px; border-width: 0 5px 7px 5px; border-color: transparent transparent #ffffff transparent;"),$debug.addStyling(e,".debugWindow .namespace .name .collapse:hover","opacity: 1;"),$debug.addStyling(e,".debugWindow .namespace .content","padding: 5px;"),$debug.addStyling(e,".debugWindow .namespace .content input[type='text']","outline: 0; border: 0; background-color: transparent; color: inherit; font-size: inherit; font-family: inherit;"),$debug.addStyling(e,".debugWindow .namespace .content input[type='text']:focus","background-color: #3A3827;"),$debug.addStyling(e,".debugWindow .namespace .content .type-array .value","color: #B88700;"),$debug.addStyling(e,".debugWindow .namespace .content .type-object .value","color: #B84500!important;"),$debug.addStyling(e,".debugWindow .namespace .content .type-string .value","color: #56b02e!important;"),$debug.addStyling(e,".debugWindow .namespace .content .type-number .value","color: #89bdff!important;"),$debug.addStyling(e,".debugWindow .namespace .content .type-bool .value","color: #AC00C6!important;"),$debug.addStyling(e,".debugWindow .namespace.collapsed .content","display: none;"),$debug.addStyling(e,".debugWindow .namespace ul, .debugWindow .namespace ul li","list-style: none; margin: 0; padding: 0;"),$debug.addStyling(e,".debugWindow .namespace ul:not(.level-0)","padding-left: 10px!important;"),$debug.addStyling(e,".debugWindow .namespace ul li","list-style: none; margin: 0; padding: 0;"),document.head.appendChild(e)}$debug.interval||(interval=setInterval(function(){$debug.digest()},$debug.settings.interval))},addStyling:function(e,n,t){e.appendChild(document.createTextNode(n+"{"+t+"}"))},simpleStringify:function(e){var n={};for(var t in e)e.hasOwnProperty(t)&&"object"!=typeof e[t]&&"function"!=typeof e[t]&&(n[t]=e[t]);return JSON.stringify(n)},setCookie:function(e,n,t){var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var o="expires="+a.toUTCString();document.cookie=$debug.settings.prefix+e+"="+n+";"+o+";path=/"},getCookie:function(e){for(var n=$debug.settings.prefix+e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var o=t[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(n))return o.substring(n.length,o.length)}return""},md5:function(e){function n(e,n){return e<<n|e>>>32-n}function t(e,n){var t,a,o,d,i;return o=2147483648&e,d=2147483648&n,t=1073741824&e,a=1073741824&n,i=(1073741823&e)+(1073741823&n),t&a?2147483648^i^o^d:t|a?1073741824&i?3221225472^i^o^d:1073741824^i^o^d:i^o^d}function a(e,n,t){return e&n|~e&t}function o(e,n,t){return e&t|n&~t}function d(e,n,t){return e^n^t}function i(e,n,t){return n^(e|~t)}function r(e,o,d,i,r,s,u){return e=t(e,t(t(a(o,d,i),r),u)),t(n(e,s),o)}function s(e,a,d,i,r,s,u){return e=t(e,t(t(o(a,d,i),r),u)),t(n(e,s),a)}function u(e,a,o,i,r,s,u){return e=t(e,t(t(d(a,o,i),r),u)),t(n(e,s),a)}function c(e,a,o,d,r,s,u){return e=t(e,t(t(i(a,o,d),r),u)),t(n(e,s),a)}function l(e){for(var n,t=e.length,a=t+8,o=(a-a%64)/64,d=16*(o+1),i=Array(d-1),r=0,s=0;t>s;)n=(s-s%4)/4,r=s%4*8,i[n]=i[n]|e.charCodeAt(s)<<r,s++;return n=(s-s%4)/4,r=s%4*8,i[n]=i[n]|128<<r,i[d-2]=t<<3,i[d-1]=t>>>29,i}function p(e){var n,t,a="",o="";for(t=0;3>=t;t++)n=e>>>8*t&255,o="0"+n.toString(16),a+=o.substr(o.length-2,2);return a}function g(e){e=e.replace(/rn/g,"n");for(var n="",t=0;t<e.length;t++){var a=e.charCodeAt(t);128>a?n+=String.fromCharCode(a):a>127&&2048>a?(n+=String.fromCharCode(a>>6|192),n+=String.fromCharCode(63&a|128)):(n+=String.fromCharCode(a>>12|224),n+=String.fromCharCode(a>>6&63|128),n+=String.fromCharCode(63&a|128))}return n}var b,f,y,m,v,x,h,w,$,C=Array(),W=7,S=12,j=17,k=22,A=5,O=9,L=14,E=20,N=4,T=11,z=16,F=23,V=6,_=10,B=15,H=21;for(e=g(e),C=l(e),x=1732584193,h=4023233417,w=2562383102,$=271733878,b=0;b<C.length;b+=16)f=x,y=h,m=w,v=$,x=r(x,h,w,$,C[b+0],W,3614090360),$=r($,x,h,w,C[b+1],S,3905402710),w=r(w,$,x,h,C[b+2],j,606105819),h=r(h,w,$,x,C[b+3],k,3250441966),x=r(x,h,w,$,C[b+4],W,4118548399),$=r($,x,h,w,C[b+5],S,1200080426),w=r(w,$,x,h,C[b+6],j,2821735955),h=r(h,w,$,x,C[b+7],k,4249261313),x=r(x,h,w,$,C[b+8],W,1770035416),$=r($,x,h,w,C[b+9],S,2336552879),w=r(w,$,x,h,C[b+10],j,4294925233),h=r(h,w,$,x,C[b+11],k,2304563134),x=r(x,h,w,$,C[b+12],W,1804603682),$=r($,x,h,w,C[b+13],S,4254626195),w=r(w,$,x,h,C[b+14],j,2792965006),h=r(h,w,$,x,C[b+15],k,1236535329),x=s(x,h,w,$,C[b+1],A,4129170786),$=s($,x,h,w,C[b+6],O,3225465664),w=s(w,$,x,h,C[b+11],L,643717713),h=s(h,w,$,x,C[b+0],E,3921069994),x=s(x,h,w,$,C[b+5],A,3593408605),$=s($,x,h,w,C[b+10],O,38016083),w=s(w,$,x,h,C[b+15],L,3634488961),h=s(h,w,$,x,C[b+4],E,3889429448),x=s(x,h,w,$,C[b+9],A,568446438),$=s($,x,h,w,C[b+14],O,3275163606),w=s(w,$,x,h,C[b+3],L,4107603335),h=s(h,w,$,x,C[b+8],E,1163531501),x=s(x,h,w,$,C[b+13],A,2850285829),$=s($,x,h,w,C[b+2],O,4243563512),w=s(w,$,x,h,C[b+7],L,1735328473),h=s(h,w,$,x,C[b+12],E,2368359562),x=u(x,h,w,$,C[b+5],N,4294588738),$=u($,x,h,w,C[b+8],T,2272392833),w=u(w,$,x,h,C[b+11],z,1839030562),h=u(h,w,$,x,C[b+14],F,4259657740),x=u(x,h,w,$,C[b+1],N,2763975236),$=u($,x,h,w,C[b+4],T,1272893353),w=u(w,$,x,h,C[b+7],z,4139469664),h=u(h,w,$,x,C[b+10],F,3200236656),x=u(x,h,w,$,C[b+13],N,681279174),$=u($,x,h,w,C[b+0],T,3936430074),w=u(w,$,x,h,C[b+3],z,3572445317),h=u(h,w,$,x,C[b+6],F,76029189),x=u(x,h,w,$,C[b+9],N,3654602809),$=u($,x,h,w,C[b+12],T,3873151461),w=u(w,$,x,h,C[b+15],z,530742520),h=u(h,w,$,x,C[b+2],F,3299628645),x=c(x,h,w,$,C[b+0],V,4096336452),$=c($,x,h,w,C[b+7],_,1126891415),w=c(w,$,x,h,C[b+14],B,2878612391),h=c(h,w,$,x,C[b+5],H,4237533241),x=c(x,h,w,$,C[b+12],V,1700485571),$=c($,x,h,w,C[b+3],_,2399980690),w=c(w,$,x,h,C[b+10],B,4293915773),h=c(h,w,$,x,C[b+1],H,2240044497),x=c(x,h,w,$,C[b+8],V,1873313359),$=c($,x,h,w,C[b+15],_,4264355552),w=c(w,$,x,h,C[b+6],B,2734768916),h=c(h,w,$,x,C[b+13],H,1309151649),x=c(x,h,w,$,C[b+4],V,4149444226),$=c($,x,h,w,C[b+11],_,3174756917),w=c(w,$,x,h,C[b+2],B,718787259),h=c(h,w,$,x,C[b+9],H,3951481745),x=t(x,f),h=t(h,y),w=t(w,m),$=t($,v);var I=p(x)+p(h)+p(w)+p($);return I.toLowerCase()}};